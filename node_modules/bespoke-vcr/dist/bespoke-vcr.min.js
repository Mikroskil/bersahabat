/*! bespoke-vcr v0.1.0 Â© 2014 Mark Dalgleish, MIT License */
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n;"undefined"!=typeof window?n=window:"undefined"!=typeof global?n=global:"undefined"!=typeof self&&(n=self);var o=n;o=o.bespoke||(o.bespoke={}),o=o.plugins||(o.plugins={}),o.vcr=e()}}(function(){return function e(n,o,r){function t(l,c){if(!o[l]){if(!n[l]){var u="function"==typeof require&&require;if(!c&&u)return u(l,!0);if(i)return i(l,!0);throw new Error("Cannot find module '"+l+"'")}var a=o[l]={exports:{}};n[l][0].call(a.exports,function(e){var o=n[l][1][e];return t(o?o:e)},a,a.exports,e,n,o,r)}return o[l].exports}for(var i="function"==typeof require&&require,l=0;l<r.length;l++)t(r[l]);return t}({1:[function(e,n){var o=function(){var e=localStorage["bespoke-vcr"];return e?JSON.parse(e):[]},r=function(){var e=o();return e.length?e[e.length-1]:void 0},t=function(e){localStorage["bespoke-vcr"]=JSON.stringify(e)},i=function(){delete localStorage["bespoke-vcr"]},l=function(e){return function(n){e=e||{},e.reporter=e.reporter||"console";var i,c=o()||[],u=e.recording||r(),a="string"==typeof e.reporter?l.reporters[e.reporter]:e.reporter,s=!1,f=!1,d=function(){var e=document.createElement("div"),n="8px";return e.style.width=n,e.style.height=n,e.style.borderRadius=n,e.style.position="absolute",e.style.left="4px",e.style.bottom="4px",e.style.backgroundColor="transparent",document.body.appendChild(e),{red:function(){e.style.backgroundColor="red"},green:function(){e.style.backgroundColor="green"},clear:function(){e.style.backgroundColor="transparent"}}}(),p=function(){return s?y():(n.slide(0),s=!0,f=!1,d.red(),a("Recording to local storage..."),i=(new Date).getTime(),u=[],void c.push(u))},g=function(){s&&y(),0!==u.length&&(f=!0,d.green(),a("Playing the following recording:",u),n.slide(0),u.forEach(function(e){setTimeout(function(){e.command?n[e.command].apply(null,e.arguments||[]):(a("Playback complete"),f=!1,d.clear())},e.timeout)}))},y=function(){s&&(u.push({timeout:(new Date).getTime()-i}),t(c),a("Successfully recorded the following to local storage:",u)),s=!1,f=!1,d.clear()};["next","prev","slide"].forEach(function(e){n.on(e,function(n){var o={command:e,timeout:(new Date).getTime()-i};"slide"===e&&(o.arguments=[n.index]),s&&(u.push(o),t(c))})});var m=e.remote||function(e){window.addEventListener("keydown",function(n){var o=80,r=82,t=83;switch(n.which){case r:e.record();break;case t:e.stop();break;case o:e.play()}})},v={record:p,play:g,stop:y};m(v)}};l.reporters={console:function(e,n){console.log("BESPOKE-VCR: "+e+"\n"+(n?JSON.stringify(n,null,2)+"\n":""))}},l.latest=function(){l.reporters.console("Latest recording:",r())},l.all=function(){l.reporters.console("All recordings:",o())},l.clear=i,n.exports=l},{}]},{},[1])(1)});